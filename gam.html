<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Car Obstacle Game - Extreme Mode</title>
    <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }

    /* Game Wrapper */
    #gameWrapper {
      position: relative;
      width: 90vw;
      height: 70vh;
      margin: auto;
      border: 3px solid black;
      border-radius: 12px;
      overflow: hidden;
    }

    /* Player */
    #player {
      position: absolute;
      width: 8%;   /* scales with wrapper */
      height: 12%;
      background-color: red;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      left: 50%;
      transform: translateX(-50%);
    }

    /* Obstacles */
    .obstacle {
      position: absolute;
      width: 8%;
      height: 12%;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0,0,0,0.8);
    }
    .normal { background-color: greenyellow; }
    .fast { background-color: orange; }
    .bouncing { background-color: whitesmoke; }
    .reverse { background-color: deeppink; }

    /* Score Display */
    #scoreDisplay {
      position: absolute;
      top: 5px;
      left: 5px;
      color: goldenrod;
      font-family: Arial, sans-serif;
      font-size: 1.2rem;
      font-weight: bold;
      background: rgba(0,0,0,0.5);
      padding: 5px 10px;
      border-radius: 5px;
    }

    /* Leaderboard */
    #leaderboard {
      display: none;
      position: absolute;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background:black;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
      z-index: 9999;
    }

    #leaderboard table {
      border-collapse: collapse;
      width: 100%;
      font-family: Arial, sans-serif;
    }

    #leaderboard th, #leaderboard td {
      border: 1px solid #ccc;
      padding: 8px 12px;
      text-align: center;
    }

    #showLeaderboard {
      position: absolute;
      top: 10px;
      right: 20px;
      padding: 10px 15px;
      background: navy;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    /* Mobile Controls */
    #mobileControls {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 20px;
      z-index: 10000;
    }

    #mobileControls button {
      width: 60px;
      height: 60px;
      font-size: 30px;
      border: none;
      border-radius: 50%;
      background: rgba(0,0,0,0.7);
      color: white;
      cursor: pointer;
    }
    #mobileControls button:active {
      background: rgba(0,150,0,0.8);
    }
  </style>
</head>
<body>
  <div id="gameWrapper">
    <div id="player"></div>
    <div id="scoreDisplay">Score: 0 | Lives: 3</div>
    <button id="showLeaderboard">Show Leaderboard</button>

    <div id="leaderboard">
      <h3 style="color:white;">Top Players</h3>
      <table>
        <thead>
          <tr><th>Username</th><th>Highest Score</th></tr>
        </thead>
        <tbody id="leaderboardBody"></tbody>
      </table>
    </div>
  </div>

  <!-- Mobile Controls -->
  <div id="mobileControls">
    <button id="btnUp">⬆️</button>
    <button id="btnDown">⬇️</button>
  </div>

  <script>
    let gameRunning = true;
    const gameWrapper = document.getElementById("gameWrapper");
    const player = document.getElementById("player");

    // ✅ Define lanes in percentages of wrapper height
    const lanes = [10, 30, 50, 70];
    let currentLane = 2;
    player.style.top = lanes[currentLane] + "%";

    let score = 0, lives = 3;

    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowUp" && currentLane > 0) currentLane--;
      if (e.key === "ArrowDown" && currentLane < lanes.length - 1) currentLane++;
      player.style.top = lanes[currentLane] + "%";
    });

    // Mobile Controls
    document.getElementById("btnUp").addEventListener("click", () => {
      if (currentLane > 0) currentLane--;
      player.style.top = lanes[currentLane] + "%";
    });

    document.getElementById("btnDown").addEventListener("click", () => {
      if (currentLane < lanes.length - 1) currentLane++;
      player.style.top = lanes[currentLane] + "%";
    });

    // Create Obstacles
    function createObstacle() {
      const types = [
        { type: "normal", speed: 0.6, bounce: false, reverse: false },
        { type: "fast", speed: 1.2, bounce: false, reverse: false },
        { type: "bouncing", speed: 0.8, bounce: true, reverse: false },
        { type: "reverse", speed: 1.2, bounce: false, reverse: true },
      ];
      const data = types[Math.floor(Math.random() * types.length)];
      const obstacle = document.createElement("div");
      obstacle.className = "obstacle " + data.type;
      obstacle.style.top = lanes[Math.floor(Math.random() * lanes.length)] + "%";
      obstacle.style.left = data.reverse ? "-10%" : "100%";
      gameWrapper.appendChild(obstacle);

      let posX = data.reverse ? -10 : 100;
      let posY = parseFloat(obstacle.style.top);
      let dy = data.bounce ? 1 : 0;

      function move() {
        if (!gameRunning) return;
        posX += data.reverse ? data.speed : -data.speed;
        if (data.bounce) {
          posY += dy;
          if (posY <= 0 || posY >= 88) dy *= -1;
        }
        obstacle.style.left = posX + "%";
        obstacle.style.top = posY + "%";

        // Collision
        const playerRect = player.getBoundingClientRect();
        const obsRect = obstacle.getBoundingClientRect();
        if (!(playerRect.right < obsRect.left || playerRect.left > obsRect.right ||
              playerRect.bottom < obsRect.top || playerRect.top > obsRect.bottom)) {
          lives--;
          obstacle.remove();
          if (lives <= 0) {
            alert("Game Over! Final Score: " + score);
            gameRunning = false;
          }
        }

        // Remove if out of bounds
        if (posX < -15 || posX > 110) {
          obstacle.remove();
          score += 5;
          document.getElementById("scoreDisplay").innerText = `Score: ${score} | Lives: ${lives}`;
        } else {
          requestAnimationFrame(move);
        }
      }
      requestAnimationFrame(move);
    }

    setInterval(createObstacle, 1200);

  </script>
</body>
</html>


